# 镜像实验室介绍
欢迎来到青云1000**镜像实验室**！这里用来存放适用于青云1000开发板的各种实验性镜像，您可以在实验室中获取并烧录它们，抢先体验各种新特性！

实验室的镜像经测试稳定后，会合并进入青云1000**镜像发布仓**。

## 单分区可扩展镜像
### 镜像特性
- 镜像中仅包含一个`系统分区`（即用于挂载`/`目录的分区）。您不用再纠结`系统分区`与`家分区`（即用于挂载`/home`目录的分区）的大小关系。

- 将镜像烧录入SD卡后，第一次启动系统时，系统分区大小会自动扩展到SD卡容量的大小。换言之，无论您的SD卡有多大，本系统都能充分利用其所有的空间。

- 压缩镜像文件解压后大小仅为2GB。无需占用您电脑过多空间。

### 使用说明
1. 准备一张容量大于等于4GB的SD卡。使用`balenaEtcher`将镜像烧录进SD卡。

2. 第一次启动系统内核会花费1~3分钟。等待青云1000的以太网口黄灯熄灭后，自动开始扩展系统分区。

3. 分区扩展消耗的时间与SD卡容量有关。64G的SD卡大约会花费1分钟时间，大容量的SD卡会花费更多时间。

4. 在分区扩展过程中，使用USB Type-C数据线将青云1000连接至电脑，电脑**不会**识别到新设备。分区扩展完成后，电脑**会**立即识别到新设备。

5. 打开`MobaXterm`等终端模拟器，通过SSH登录青云1000的Shell，即可正常使用本系统。此外，执行`lsblk`命令可查看当前存储设备的分区情况。

6. 扩展完毕后的系统分区大小理论上应当为`SD卡容量 减去 513MB`。其中513MB为位于SD卡开头的系统固件区。

### 镜像列表
#### Ubuntu 24.04 Daily Build
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`
- 备注：此镜像为`Ubuntu 24.04`的`Daily Build`版本，正式发行版本仍在开发中。该`Daily Build`下载日期为`2023-12-12`。

#### Ubuntu 22.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 20.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 18.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Debian 12
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`
- 备注：目前该镜像的内核启动时间较长，约3分钟，请耐心等待。首次启动时，64G卡的分区扩展耗时约为2~3分钟。

#### Rocky 9
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 内核配置版本：`268df6c`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`
- 备注：目前该镜像的内核启动时间较长，约3分钟，请耐心等待。首次启动时，64G卡的分区扩展耗时约为2~3分钟。




# 镜像版本更新日志

## 1.1.0

### 更新说明
1. 【特性】添加了内核对`USB存储设备`、`RTL8192EU网卡设备`、`ACM串口设备`等的驱动支持。
2. 【特性】文件名中标有`64G`的镜像文件实际大小为`59.4 GigaBytes`。
3. 【修复】为`Ubuntu 20.04`镜像添加了`multipath`相关驱动，修复了`apt install`运行时`multipath`相关服务启动失败的错误。
4. 【修复】大幅缩减了压缩镜像文件的大小。

### 版本升级
适用旧镜像版本：`1.0.0`

已经烧录好的旧版本系统，可以按照以下方法升级到当前版本：

1. 假设SD卡中烧录有旧版本的`Ubuntu 18.04`系统镜像（固件版本`21.0.4.9`），并且系统已在青云1000开发板上使用了一段时间。以该场景为例。

2. 根据旧镜像的固件版本，访问本仓库的`1.1.0` -> `Ascend310-固件版本`目录，下载内核升级包`kernel_upgrade_tool-ascend310-固件版本.tar.gz`。

3. 保持青云1000开发板上旧系统的运行，将内核升级包上传至旧系统中的任意目录（如`/home/HwHiAiUser/`）。

4. 登录旧系统并进入对应目录，执行解压命令`tar xzvf kernel_upgrade_tool-ascend310-固件版本.tar.gz`。

5. 执行升级命令`sudo ./kernel_upgrade_tool/run`。出现`All upgrade completed! Please 'sudo reboot' the machine.`字样后，升级完成。

6. 重启青云1000开发板。重启后登录系统，执行`lsmod | grep 8192eu 2> /dev/null`。若返回结果中包含`8192eu`，表示RTL8192EU网卡设备驱动正常工作，升级成功。

### 镜像列表
#### Ubuntu 18.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 22.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 20.04
- Ascend310固件版本：`6.0.0`
- 系统内核版本：`5.10.0+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

## 1.0.0

### 更新说明
这是青云1000开发板的首个正式系统镜像版本。

### 镜像列表
#### Ubuntu 18.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 22.04
- Ascend310固件版本：`21.0.4.9`
- 系统内核版本：`4.19.90+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`

#### Ubuntu 20.04（Beta测试版）
- Ascend310固件版本：`6.0.0`
- 系统内核版本：`5.10.0+`
- 支持CANN版本：`6.0.RC1.alpha00*`、`6.0.1.alpha001`